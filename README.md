# ASRBrain (Project Gemini) - ç¦»çº¿æ™ºèƒ½è¯­éŸ³åº•åº§

**Building the Auditory Cortex for Offline AI Agents**

ASRBrain æ˜¯ä¸€ä¸ªä¸“ä¸º **ç¦»çº¿ç¯å¢ƒ (Air-gapped)** è®¾è®¡çš„é«˜æ€§èƒ½è¯­éŸ³è¯†åˆ«å¼•æ“ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„è¯­éŸ³è½¬æ–‡å­—å·¥å…·ï¼Œè€Œæ˜¯ä¸ºæœªæ¥çš„æœ¬åœ°åŒ– AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰æ‰“é€ çš„â€œå¬è§‰ä¸­æ¢â€ã€‚

æœ¬é¡¹ç›®åŸºäº OpenAI çš„ Whisper æ¶æ„ï¼Œç»è¿‡ `faster-whisper` (CTranslate2) çš„æ·±åº¦ä¼˜åŒ–ï¼Œç»“åˆè‡ªç ”çš„æµå¼ VAD (è¯­éŸ³æ´»åŠ¨æ£€æµ‹) ç­–ç•¥ï¼Œèƒ½å¤Ÿåœ¨ **çº¯ CPU ç¯å¢ƒ** ä¸‹å®ç°é«˜ç²¾åº¦çš„å®æ—¶æµå¼è¯­éŸ³è¯†åˆ«ã€‚

---

## ğŸŒŸ æ ¸å¿ƒä»·å€¼ (Core Value)

åœ¨æ„å»ºæœ¬åœ°åŒ– AI åŠ©æ‰‹æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä¸‰å¤§æŒ‘æˆ˜ï¼šéšç§æ³„éœ²ã€äº‘ç«¯å»¶è¿Ÿã€ç®—åŠ›ç“¶é¢ˆã€‚ASRBrain æ—¨åœ¨è§£å†³è¿™äº›é—®é¢˜ï¼š

*   **ğŸ”’ ç»å¯¹éšç§**: æ‰€æœ‰è®¡ç®—éƒ½åœ¨æœ¬åœ°å®Œæˆï¼Œæ— éœ€ä¸Šä¼ ä»»ä½•éŸ³é¢‘æ•°æ®è‡³äº‘ç«¯ï¼Œç¡®ä¿æ•æ„Ÿä¿¡æ¯ï¼ˆä¼šè®®è®°å½•ã€ä¸ªäººå¯¹è¯ï¼‰çš„ç»å¯¹å®‰å…¨ã€‚
*   **âš¡ æè‡´æ•ˆèƒ½**: é€šè¿‡ `int8` é‡åŒ–ä¸ C++ æ¨ç†å¼•æ“åŠ é€Ÿï¼Œåœ¨æ™®é€šæ¶ˆè´¹çº§ CPU ä¸Šå³å¯æµç•…è¿è¡Œ `small` ç”šè‡³ `medium` æ¨¡å‹ï¼Œæ— éœ€æ˜‚è´µçš„ GPUã€‚
*   **ğŸŒŠ çœŸå®æµå¼**: å†…ç½®åŸºäºèƒ½é‡æ£€æµ‹çš„ VAD ç®—æ³•ä¸æ—¶é—´è½´å¯¹é½é€»è¾‘ï¼Œæ”¯æŒé•¿éŸ³é¢‘çš„å®æ—¶åˆ‡ç‰‡è¾“å‡ºï¼Œè€Œéæ­»æ¿çš„æ•´æ®µè½¬å†™ã€‚
*   **ğŸ‡¨ğŸ‡³ ä¸­æ–‡è°ƒä¼˜**: é’ˆå¯¹ç®€ç¹ä½“æ··æ‚é—®é¢˜è¿›è¡Œäº† Prompt å·¥ç¨‹ä¼˜åŒ–ï¼Œç¡®ä¿è¾“å‡ºçº¯æ­£çš„ç®€ä½“ä¸­æ–‡ã€‚

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ (Architecture)

```text
[Input Source]      [Core Engine]                 [Output]
(File / Mic)  --->  StreamProcessor (VAD)  --->  Callback/Console
                          |                           |
                    +------------+              +------------+
                    | AsrService |              | JSONL File | (Time-stamped)
                    +------------+              +------------+
                          |                           |
                    faster-whisper              [Summary Report]
                    (Model int8)                (CSV Format)
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. ç¯å¢ƒå‡†å¤‡ (æ¨è Conda)

æœ¬é¡¹ç›®ä¾èµ– `torch` å’Œ `soundfile` ç­‰åº“ï¼Œä½¿ç”¨ Conda å¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†è¿™äº›ç§‘å­¦è®¡ç®—ä¾èµ–ã€‚

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/dogcatdogdog/ASRBrain.git
cd ASRBrain

# 2. åˆ›å»ºå¹¶æ¿€æ´» Conda ç¯å¢ƒ
conda create -n asr_brain python=3.10
conda activate asr_brain

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r app/code/requirements.txt
```

### 2. æ¨¡å‹å‡†å¤‡

é¡¹ç›®é»˜è®¤é…ç½®ä½¿ç”¨ Whisper `small` æ¨¡å‹ï¼ˆå¹³è¡¡ç²¾åº¦ä¸é€Ÿåº¦çš„æœ€ä½³é€‰æ‹©ï¼‰ã€‚
*   **è‡ªåŠ¨æ¨¡å¼**: é¦–æ¬¡è¿è¡Œæ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä» HuggingFace é•œåƒä¸‹è½½æ¨¡å‹è‡³ `app/models/` ç›®å½•ã€‚
*   **æ‰‹åŠ¨æ¨¡å¼**: è‹¥ç½‘ç»œå—é™ï¼Œè¯·è‡ªè¡Œä¸‹è½½ `systran/faster-whisper-small` æ¨¡å‹æ–‡ä»¶å¹¶è§£å‹è‡³ `app/models/`ã€‚

### 3. ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…· (CLI)

#### æ¨¡å¼ä¸€ï¼šå•æ–‡ä»¶æµå¼è¯†åˆ« (Stream Mode)
æ¨¡æ‹Ÿå®æ—¶æµå¼è¾“å…¥ï¼Œé€‚åˆæµ‹è¯•æ¨¡å‹çš„å®æ—¶å“åº”èƒ½åŠ›ã€‚

```bash
# Windows ç”¨æˆ·å»ºè®®å…ˆæ‰§è¡Œæ­¤å‘½ä»¤é˜²æ­¢ä¹±ç 
chcp 65001

# è¿è¡Œè¯†åˆ«
python app/code/main.py -i "data/test_audio.wav"
```
*   **è¾“å‡º**: æ§åˆ¶å°å®æ—¶æ‰“å°æ¯ä¸€å¥è¯†åˆ«ç»“æœï¼Œå®Œæ•´ç»“æœä¿å­˜åœ¨ `app/out/session_xxx.jsonl`ã€‚

#### æ¨¡å¼äºŒï¼šæ‰¹é‡æ•°æ®é›†å¤„ç† (Batch Mode)
é€‚åˆå¤§è§„æ¨¡å›å½’æµ‹è¯•æˆ–æ‰¹é‡è½¬å†™å­˜é‡å½•éŸ³æ–‡ä»¶ã€‚

```bash
python app/code/main.py --batch "data/my_dataset_folder"
```
*   **è¾“å‡º**: è‡ªåŠ¨ç”Ÿæˆ `app/out/batch_xxx/` ç›®å½•ï¼ŒåŒ…å«æ±‡æ€»æŠ¥è¡¨ (`summary.csv`) å’Œè¯¦æƒ…æ–‡ä»¶ (`details/*.jsonl`)ã€‚

---

## ğŸ› ï¸ é…ç½®è¯´æ˜ (Configuration)

æ‰€æœ‰æ ¸å¿ƒå‚æ•°å‡å¯åœ¨ `app/config/models.yaml` ä¸­åŠ¨æ€è°ƒæ•´ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼š

```yaml
modelConfig:
  modelSize: "small"        # å¯é€‰: tiny, base, small, medium
  device: "cpu"             # å¯é€‰: cpu, cuda
  computeType: "int8"       # å¯ç”¨é‡åŒ–åŠ é€Ÿ

asrParams:
  initialPrompt: "..."      # å¼•å¯¼ç®€ç¹ä½“æˆ–ç‰¹å®šè¯­å¢ƒ
  vadFilter: true           # å¼€å¯ VAD è¿‡æ»¤
```

---

## ğŸ—ºï¸ æ¼”è¿›è·¯çº¿ (Roadmap)

*   **Phase 1: Python Sidecar (å½“å‰é˜¶æ®µ)**
    *   [x] æ ¸å¿ƒ ASR å¼•æ“ & VAD åˆ‡ç‰‡
    *   [x] CLI å‘½ä»¤è¡Œå·¥å…·ä½“ç³»
    *   [ ] **FastAPI æ¥å£**: æä¾› WebSocket æœåŠ¡ï¼Œä¾›å‰ç«¯å®æ—¶è°ƒç”¨
    *   [ ] **LLM æ¥å…¥**: å°†è¯†åˆ«ç»“æœè¾“å…¥æœ¬åœ°å¤§æ¨¡å‹è¿›è¡Œæ‘˜è¦/å¯¹è¯
*   **Phase 2: Native Evolution**
    *   [ ] è¿ç§»è‡³ Rust/C++ å®ç°ï¼Œè¿›ä¸€æ­¥é™ä½å†…å­˜å ç”¨

---

## ğŸ“„ License

MIT License